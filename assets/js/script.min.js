!function(a,b){function c(a,b,d,e){if(!a.length)return"#document-fragment"===a.nodeName?void c(a.childNodes,b,d,e):("function"==typeof m.Events.list[b]?m.Events.list[b](a,function(){return function(a){d(a,e)}}(d,e)):f(a.addEventListener)?a.addEventListener(b,function(){return function(a){d(a,e)}}(d,e),!1):a.attachEvent("on"+b,function(){return function(a){d(a,e)}}(d,e)),a);for(var g=0;g<a.length;g++)c(a[g],b,d,e)}function d(a){"function"==typeof a&&m.dom_load_event_listeners.push(a)}function e(a){for(var b=[],c=0;c<a.childNodes.length;c++)if(b.push(a.childNodes[c]),a.childNodes[c].childNodes)for(var d=e(a.childNodes[c]),f=0;f<d.length;f++)b.push(d[f]);return b}function f(a){return"undefined"!=typeof a}function g(a,b){if(this!==k)var d=g.create(a,b);else var d=g.select(a,b);return d.childs=d.childNodes,d.parent=d.parentNode,d.clone=d.cloneNode,d.add=function(a){return function(b){if("#document-fragment"===b.nodeName){for(var c=[],d=b.childNodes,e=d.length,f=0;e>f;f++)a.appendChild(d[0]),c.push(a.childNodes[a.childNodes.length-1]);return c}if(!b.length)return a.appendChild(b),p(b);for(var f=0;f<b.length;f++){for(var c=[],e=b.length,f=0;e>f;f++)a.appendChild(b[0]),c.push(a.childNodes[a.childNodes.length-1]);return c}}}(d),d.on=function(a){return function(b,d,e){c(a,b,d,e)}}(d),d.offset=function(a){return function(){for(var b={x:0,y:0};a;)b.x+=a.offsetLeft-(a==l.body?0:a.scrollLeft)+a.clientLeft,b.y+=a.offsetTop-(a==l.body?0:a.scrollTop)+a.clientTop,a=a.offsetParent;return b}}(d),d.has_class=function(a){return function(b){return(" "+a.className+" ").indexOf(" "+b+" ")>-1}}(d),d.add_class=function(a){return function(b){return p(a).has_class(b)||(a.className+=" "+b),p(a)}}(d),d.remove_class=function(a){return function(b){return a.className=(" "+a.className+" ").replace(" "+b+" ",""),p(a)}}(d),d.toogle_class=function(a){return function(b){return p(a).has_class(b)?p(a).remove_class(b):p(a).add_class(b),p(a)}}(d),d.is_disabled=function(a){return function(){return p(a).has_class("disabled")}}(d),d.is_not_disabled=function(a){return function(){return!p(a).has_class("disabled")}}(d),d.disable=function(a){return function(){return a.tabIndex=0,p(a).add_class("disabled")}}(d),d.undisable=function(a){return function(){return a.tabIndex=0,p(a).remove_class("disabled")}}(d),d.inner=function(a){var b=l.createElement("div");return b.setAttribute("tag-name","_inner_"),a.appendChild(b),a},d}function h(a){this.name=a,m.components[a]=this}function i(a){this.element=a,this.src=this.element.getAttribute("data-background"),this.element.style.backgroundImage="url("+this.src+")",this.imgLoader=new Image,this.imgLoader.src=this.src,c(this.imgLoader,"load",function(){a.className=a.className.replace("bgLoader",""),a.className=a.className.replace("bg-loader",""),a.className+=" bgLoaderTransition bgLoaded",a.className+=" bg-loader-transition bg-loaded",setTimeout(function(a){return function(){a.className=a.className.replace("bg-loader-transition","")}}(a),300)})}function j(){var a=l.getElementById("exporter-input")||l.createElement("div"),b=l.getElementById("exporter-quality")||l.createElement("div"),c=l.getElementById("exporter-autoplay")||l.createElement("div"),d=l.getElementById("exporter-time-checkbox")||l.createElement("div"),e=l.getElementById("exporter-time-input")||l.createElement("div"),f="//dreamvids.fr/embed/"+_VIDEO_ID_,g=b.options[b.value].innerHTML||"640x360",h=g.split("x");width=h[0],height=h[1];var i=c.checked||!1;i&&(f+="?autoplay");var j=d.checked||!1;if(j)for(var k=["s","m","h"],m=e.value,n=m.split(":").reverse(),o=0;o<n.length;o++)f+=0===o&!i?"?":"&",f+=k[o]+"="+n[o];a.value='<iframe width="'+width+'" height="'+height+'" src="'+f+'" allowfullscreen frameborder="0"></iframe>'}var k=a,l=b,m={name:"MarmWork"};m.Events={list:{}},m.Events.add=function(a,b){m.Events.list[a]=b},m.Events.on_tap_events_list=[],m.Events.add("CLICK",function(a,b){var c=new m.Events.on_tap_object(a,b);m.Events.on_tap_events_list.push(c)}),m.Events.on_tap_object=function(a,b){this.callback=b,this.element=a,this.touchstart=function(a){return function(b){a.moved=!1,a.startX=b.touches[0].clientX,a.startY=b.touches[0].clientY}}(this),this.touchmove=function(a){return function(b){(Math.abs(b.touches[0].clientX-a.startX)>10||Math.abs(b.touches[0].clientY-a.startY)>10)&&(a.moved=!0)}}(this),this.touchend=function(a){return function(b){a.moved||a.callback(b)}}(this),c(this.element,"touchstart",this.touchstart),c(this.element,"touchmove",this.touchmove),c(this.element,"touchend",this.touchend),c(this.element,"touchcancel",this.touchend),c(this.element,"click",function(a,b){"ontouchstart"in k||b.callback(a)},this)},m.dom_load_event_listeners=[],m.dom_content_loaded=!1,m.on_dom_content_loaded=function(){if(!m.dom_content_loaded){m.dom_content_loaded=!0;for(var a=0;a<m.dom_load_event_listeners.length;a++){var b=m.dom_load_event_listeners[a];"function"==typeof b&&b()}}},c(l,"DOMContentLoaded",m.on_dom_content_loaded),c(k,"load",m.on_dom_content_loaded),k.onload=function(){m.on_dom_content_loaded()};var n=function(a){return n.get(a)};n.normalize=function(a){return a?"string"==typeof a?{url:a}:a:null},n.json=function(a){return(a=n.normalize(a))?(a.json=!0,new n.request(a)):void 0},n.get=function(a){return new n.request(a)},n.post=function(a){return(a=n.normalize(a))?(a.method="POST",new n.request(a)):void 0},n.put=function(a){return(a=n.normalize(a))?(a.method="PUT",new n.request(a)):void 0},n.delete_=function(a){return(a=n.normalize(a))?(a.method="DELETE",new n.request(a)):void 0},n.request=function(a){if(!a)return!1;if("string"==typeof a&&(a={url:a}),"POST"===a.method||"PUT"===a.method||"DELETE"===a.method){var b="?";for(var c in a.options)b+=a.options.hasOwnProperty(c)?"&"+c+"="+a.options[c]:""}else{a.method="GET",a.url+=a.url.indexOf("?")<0?"?":"";for(var c in a.options)a.url+=a.options.hasOwnProperty(c)?"&"+c+"="+a.options[c]:""}this.xhr=k.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),this.xhr.options=a,this.xhr.callbacks={then:[],error:[]},this.then=function(a){return this.xhr.callbacks.then.push(a),this},this.error=function(a){return this.xhr.callbacks.error.push(a),this},this.xhr.call=function(a,b){for(var c=0;c<this.callbacks[a].length;c++)"function"==typeof this.callbacks[a][c]&&this.callbacks[a][c](b)},this.xhr.onreadystatechange=function(){if(4===this.readyState&&200==this.status){var a=this.responseText;if(this.options.json)try{a=JSON.parse(a)}catch(b){return this.call("error","invalid json"),!1}this.call("then",a)}else 4===this.readyState&&404==this.status?this.call("error","404"):4===this.readyState&&this.call("error","unknow")},this.xhr.open(a.method,a.url,!0),this.xhr.setRequestHeader("Content-type","application/x-www-form-urlencoded"),this.xhr.send("undefined"!=typeof b?b:null)},d(function(){for(var a=0;a<m.scripts.length;a++){var b=!1,c=m.scripts[a];if("*"!==c.pages&&"all"!==c.pages&&c.pages)for(var d=0;d<c.pages.length;d++)c.pages[d]===_currentpage_&&(b=!0);else b=!0;b&&c.call()}}),m.scripts=[];var o=function(a){this.pages=a.pages,this.to_call=a.call,m.scripts.push(this)};o.prototype.call=function(){this.to_call()},m.Element=g;var p=g;g.create=function(a,b){var c,d=/\w+/.exec(a)[0];if(m.components[d]){var e="object"==typeof b?b:{},f=m.components[d].create(e);child.parentNode.insertBefore(f,child),child.parentNode.removeChild(child)}else c=l.createElement(d);var g=a.replace(/#([a-z-_]+)/i,"").replace(/\w+/,"").split(".");if(g.length>1){c.className="";for(var h=1;h<g.length;h++)c.className+=" "+g[h]}var i=/([a-z-_]+)(#([a-z-_]+))/i.exec(a);return i&&(c.id=i[3]),c},g.select=function(a){var b;return"string"!=typeof a?b=a:"#"==a[0]&&(b=l.getElementById(a.substring(1))||new p("div")),b},m.components={};m.Component=h,h.attributes_parser=function(a,b){for(var c={},d=0;d<a.length;d++)if(c[a[d].name]=a[d].value,"string"==typeof a[d].value&&"$"==a[d].value[0]&&b)for(parameter in b)a[d].value==="${"+parameter+"}"&&b.hasOwnProperty(parameter)&&(c[a[d].name]=b[parameter]);return c},h.prototype.create=function(a){var b=g(l.createDocumentFragment());this.render(b,a);var c=l.createElement("div");c.appendChild(b);var d=e(c);if(a._CHILDNODES_.length){for(var f=!1,h=0;h<d.length;h++){var i=d[h];if("_inner_"===i.getAttribute("tag-name")){for(var j=a._CHILDNODES_.length,h=0;j>h;h++)i.parentNode.insertBefore(a._CHILDNODES_[0],i);i.parentNode.removeChild(i),f=!0;break}}if(!f){console.error("L'intérieur du Component \""+this.name+"\" n'est pas défini.");for(var h=0;h<a._CHILDNODES_.length;h++)c.firstChild.appendChild(a._CHILDNODES_[h])}}for(var k=l.createDocumentFragment();c.childNodes.length;)k.appendChild(c.childNodes[0]);return k};var q=h.generate=h.gen=function(a,b){if("string"!=typeof a)return l.createElement("div");a=a.replace(/^\s+|\s+$/g,""),a=a.replace(/<(\w*)( (.+?))?\/>/g,"<$1$2></$1>"),a=a.replace(/<(\w*)( (.+?))?>/g,'<div tag-name="$1"$2>').replace(/<\/(.+?)>/g,"</div>");var c=l.createElement("div");c.innerHTML=a;var d=!1,f=!1;for(loops=0;!d;){f=!1,loops++,loops>10&&(console.error("Une boucle de création de component a été détéctée"),d=!0);for(var g=e(c),i=0;i<g.length;i++){var j=g[i],k="";if(j.getAttribute&&(k=j.getAttribute("tag-name")||""),m.components[k]){var n=h.attributes_parser(j.attributes,b);n._CHILDNODES_=j.childNodes;var o=m.components[k].create(n),p=o.firstChild;for(attribute in n)n.hasOwnProperty(attribute)&&null===p.getAttribute(attribute)&&"string"==typeof n[attribute]&&p.setAttribute(attribute,n[attribute]);p.removeAttribute("tag-name"),j.parentNode.insertBefore(o,j),j.parentNode.removeChild(j),f=!0;break}}f||(d=!0)}return c.childNodes};h.inner=function(a){var b=l.createElement("div");return b.setAttribute("tag-name","_inner_"),a.appendChild(b),a};var r=new h("btn");r.render=function(a,b){var d="raised"===b.type?"raised":"flat",e=b.color?".btn--"+b.color:"",h=b.outline?".btn--outline-"+b.outline:"",i=b.ripple?".btn--ripple-"+b.ripple:"",j=f(b.disable)?".disabled":"",k=a.add(new g("div.btn.btn--"+d+e+h+i+j));j||(k.tabIndex=0),a.inner(k),b.click&&c(k,"CLICK",b.click,k),b["no-ripple"]||p(k).add(q('<ripple parent="${parent}"/>',{parent:k}))};var s=new h("card");s.render=function(a,b){var d="raised"===b.type?"raised":"flat",e=b.color?".btn--"+b.color:"",h=b.outline?".btn--outline-"+b.outline:"",i=b.ripple?".btn--ripple-"+b.ripple:"",j=f(b.disable)?".disabled":"",k=a.add(new g("div.btn.btn--"+d+e+h+i+j));j||(k.tabIndex=0),a.inner(k),b.click&&c(k,"CLICK",b.click,k)};var t=new h("ripple");t.render=function(a,b){var d=a.add(new g("div.ripple"));a.inner(d),b.parent&&c(b.parent,"mousedown",function(a,b){var c=b.ripple,d=b.parent;if(p(d).is_not_disabled()){var e=c.add(new p("div.ripple__circle.ripple__circle--animate")),f=p(d).offset(),g=a.changedTouches?a.changedTouches[0].pageX:a.pageX,h=a.changedTouches?a.changedTouches[0].pageY:a.pageY;e.style.left=g-f.x+"px",e.style.top=h-f.y+"px"}},{ripple:d,parent:b.parent})},new o({call:function(){var a=l.getElementsByClassName("bg-loader");if(a&&a.length)for(var b=0,c=a.length;c>b;b++)new i(a[b])}}),new o({pages:["watch"],call:function(){var a=l.getElementById("embed-video-icon")||l.createElement("div");c(a,"CLICK",function(){var a=l.getElementById("video-info-description")||l.createElement("div");if(a.className.search("export")>-1)a.className=a.className.replace("export","");else{a.className+=" export";var b=l.getElementById("exporter-input")||l.createElement("div");b.select()}});var b=(l.getElementById("exporter-input")||l.createElement("div"),l.getElementById("exporter-quality")||l.createElement("div")),d=l.getElementById("exporter-autoplay")||l.createElement("div"),e=l.getElementById("exporter-time-checkbox")||l.createElement("div"),f=l.getElementById("exporter-time-input")||l.createElement("div");c(b,"change",j),c(d,"change",j),c(e,"change",j),c(f,"change",j),j()}}),new o({pages:["default","watch"],call:function(){}}),new o({pages:["watch"],call:function(){var a=l.getElementById("share-video-icon")||l.createElement("div");c(a,"CLICK",function(){var a=l.getElementById("share-video-block")||l.createElement("div"),b=l.getElementById("video-info-description")||l.createElement("div");a.className.search("show")>-1?(a.className=a.className.replace("show",""),b.className=b.className.replace("little","")):(a.className+=" show",b.className+=" little")})}}),new o({call:function(){console.log("test")}}),k.Application=m}(window,document);