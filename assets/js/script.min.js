function on(a,b,c){return"CLICK"===b?Application.onTap(a,c):a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent(b,c),a}function background_loader(a){this.element=a,this.src=this.element.getAttribute("data-background"),this.element.style.backgroundImage="url("+this.src+")",this.imgLoader=new Image,this.imgLoader.src=this.src,on(this.imgLoader,"load",function(){a.className=a.className.replace("bgLoader",""),a.className=a.className.replace("bg-loader",""),a.className+=" bgLoaderTransition bgLoaded",a.className+=" bg-loader-transition bg-loaded",setTimeout(function(a){return function(){a.className=a.className.replace("bg-loader-transition","")}}(a),300)})}function set_exporter_input_value(){var a=document.getElementById("exporter-input")||document.createElement("div"),b=document.getElementById("exporter-quality")||document.createElement("div"),c=document.getElementById("exporter-autoplay")||document.createElement("div"),d=document.getElementById("exporter-time-checkbox")||document.createElement("div"),e=document.getElementById("exporter-time-input")||document.createElement("div"),f="//dreamvids.fr/embed/"+_VIDEO_ID_,g=b.options[b.value].innerHTML||"640x360",h=g.split("x");width=h[0],height=h[1];var i=c.checked||!1;i&&(f+="?autoplay");var j=d.checked||!1;if(j)for(var k=["s","m","h"],l=e.value,m=l.split(":").reverse(),n=0;n<m.length;n++)console.log(m[n],k[n]),f+=0===n&!i?"?":"&",f+=k[n]+"="+m[n];a.value='<iframe width="'+width+'" height="'+height+'" src="'+f+'" allowfullscreen frameborder="0"></iframe>'}var Application={},_scripts_=[],Script=function(a){this.pages=a.pages,this.to_call=a.call,_scripts_.push(this)};Script.prototype.call=function(){this.to_call()};var marmottajax=function(a){return marmottajax.get(a)};marmottajax.n=function(a){return a?"string"==typeof a?{url:a}:a:!1},marmottajax.json=function(a){return(a=marmottajax.n(a))?(a.json=!0,new marmottajax.r(a)):void 0},marmottajax.get=function(a){return new marmottajax.r(a)},marmottajax.post=function(a){return(a=marmottajax.n(a))?(a.method="POST",new marmottajax.r(a)):void 0},marmottajax.r=function(a){if(!a)return!1;if("string"==typeof a&&(a={url:a}),"POST"===a.method){var b="?";for(var c in a.options)b+=a.options.hasOwnProperty(c)?"&"+c+"="+a.options[c]:""}else{a.method="GET",a.url+=a.url.indexOf("?")<0?"?":"";for(var c in a.options)a.url+=a.options.hasOwnProperty(c)?"&"+c+"="+a.options[c]:""}this.x=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),this.x.o=a,this.x.c={t:[],e:[]},this.then=function(a){return this.x.c.t.push(a),this},this.error=function(a){return this.x.c.e.push(a),this},this.x.l=function(a,b){for(var c=0;c<this.c[a].length;c++)"function"==typeof this.c[a][c]&&this.c[a][c](b)},this.x.y=function(a){this.l("t",a)},this.x.z=function(a){this.l("e",a)},this.x.onreadystatechange=function(){if(4===this.readyState&&200==this.status){var a=this.responseText;if(this.o.json)try{a=JSON.parse(a)}catch(b){return this.z("invalid json"),!1}this.y(a)}else 4===this.readyState&&404==this.status?this.z("404"):4===this.readyState&&this.z("unknow")},this.x.open(a.method,a.url,!0),this.x.setRequestHeader("Content-type","application/x-www-form-urlencoded"),this.x.send("undefined"!=typeof b?b:null)},Application.onTapEventsList=[],Application.onTap=function(a,b){var c=new Application.onTapObject(a,b);Application.onTapEventsList.push(c)},Application.onTapObject=function(a,b){this.callback=b,this.element=a,this.touchstart=function(a){return function(b){a.moved=!1,a.startX=b.touches[0].clientX,a.startY=b.touches[0].clientY}}(this),this.touchmove=function(a){return function(b){(Math.abs(b.touches[0].clientX-a.startX)>10||Math.abs(b.touches[0].clientY-a.startY)>10)&&(a.moved=!0)}}(this),this.touchend=function(a){return function(b){a.moved||a.callback(b)}}(this),on(this.element,"touchstart",this.touchstart),on(this.element,"touchmove",this.touchmove),on(this.element,"touchend",this.touchend),on(this.element,"touchcancel",this.touchend),on(this.element,"click",function(a){return function(){"ontouchstart"in window||a.callback(event)}}(this))},document.addEventListener("DOMContentLoaded",function(){for(var a=0;a<_scripts_.length;a++){var b=!1,c=_scripts_[a];if("*"!==c.pages&&"all"!==c.pages&&c.pages)for(var d=0;d<c.pages.length;d++)c.pages[d]===_currentpage_&&(b=!0);else b=!0;b&&c.call()}},!1),new Script({call:function(){var a=document.getElementsByClassName("bgLoader");a.length&&console.error(a.length+" éléments possedent la classe bgLoader qui n'est plus utilisée.");for(var b=document.getElementsByClassName("bg-loader"),c=0;c<b.length;c++)a.push(b[c]);if(a&&a.length)for(var c=0,d=a.length;d>c;c++)new background_loader(a[c])}}),new Script({pages:["watch"],call:function(){var a=document.getElementById("embed-video-icon")||document.createElement("div");on(a,"CLICK",function(){var a=document.getElementById("video-info-description")||document.createElement("div");if(a.className.search("export")>-1)a.className=a.className.replace("export","");else{a.className+=" export";var b=document.getElementById("exporter-input")||document.createElement("div");b.select()}});var b=(document.getElementById("exporter-input")||document.createElement("div"),document.getElementById("exporter-quality")||document.createElement("div")),c=document.getElementById("exporter-autoplay")||document.createElement("div"),d=document.getElementById("exporter-time-checkbox")||document.createElement("div"),e=document.getElementById("exporter-time-input")||document.createElement("div");on(b,"change",set_exporter_input_value),on(c,"change",set_exporter_input_value),on(d,"change",set_exporter_input_value),on(e,"change",set_exporter_input_value),set_exporter_input_value()}}),new Script({pages:["default","watch"],call:function(){}}),new Script({pages:["watch"],call:function(){var a=document.getElementById("share-video-icon")||document.createElement("div");on(a,"CLICK",function(){var a=document.getElementById("share-video-block")||document.createElement("div"),b=document.getElementById("video-info-description")||document.createElement("div");a.className.search("show")>-1?(a.className=a.className.replace("show",""),b.className=b.className.replace("little","")):(a.className+=" show",b.className+=" little")})}});